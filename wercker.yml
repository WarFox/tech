box: node
build:
  steps:
    - npm-install
    
    - script:
        name: echo nodejs information
        code: |
          echo "node version $(node -v) running"
          echo "npm version $(npm -v) running"
    - script:
        name: Install Hexo
        code: |
          sudo npm install -g hexo
    - script:
        name: Generate static files
        code: |
          hexo generate

deploy:
    steps:
        - add-to-known_hosts:
            hostname: direct.deepumohan.com
        - mktemp:
            envvar: PRIVATEKEY_PATH
        - create-file:
            name: write key
            filename: $PRIVATEKEY_PATH
            content: $PRODUCTION_PRIVATE
            overwrite: true
            hide-from-log: true
        - script:
            name: transfer files
            code: |
                pwd
                ls -la
                scp -i $PRIVATEKEY_PATH -o StrictHostKeyChecking=no -o UserKnownHostsFile=no -P $PORT -v -r public/* warfox@direct.deepumohan.com:~/public_html/deepumohan.com/tech
